var interval1=null,interval2=null,interval3=null,interval4=null,version=null,__FileList=[],__ListIndex=0,console=console||{log:function(){},info:function(){},error:function(){},warn:function(){}};$().ready(function(){environmentInit();intergrityChk();version={Major:"1",Minor:"0"}});function reqRegConnect(e,a){if(""==getPhoneOSValue())return alert(_REQUIRED_PHONEOS),!1;if(""==e)return alert(_REQUIRED_USER_ID),!1;if(""==a)return alert(_REQUIRED_SERVICE_NAME),!1;if(!confirm(_CONFIRM_REG_CONNECT))return alert(_ERROR_CANCEL),!1;e=e+"_"+a;var d={};d.UserID=e;var f=[];f.push(d);var g={};g.Version=version;g.CMD=_REQ_REG_CONNECT;g.Hash=genBodyHash(JSON.parse(JSON.stringify(f)));d=[];d.push(g);g={};g.Header=d;g.Body=JSON.stringify(f);$.ajax({url:_RELAY_SERVER_URL,type:"POST",data:{REQUEST:JSON.stringify(g)},success:function(a){a=JSON.parse(a);if(null!=a.Header[0].CMD){var d=JSON.parse(a.Body),f=d[0].Message,g=JSON.parse(d[0].Data);if(a.Header[0].Hash==genBodyHash(d)){if(a.Header[0].CMD==_RES_REG_CONNECT)if(d[0].Status==_STATUS_PROCESS_OK)if(a=g.Random){$("#random").val(a);var n=+new Date;interval1=setInterval(function(){18E4>+new Date-n?reqRegComplete(e):clearInterval(interval1)},500)}else alert(_ERROR_NO_PARAM);else d[0].Status!=_STATUS_ALREAY_REGISTERED&&d[0].Status!=_STATUS_PROCESS_FAIL||alert(f)}else alert(_ERROR_HASH_VALIDATE_FAILED)}},error:function(){alert(_ERROR_FAILED)}})}function reqModifyConnect(e,a){if(""==getPhoneOSValue())return alert(_REQUIRED_PHONEOS),!1;if(""==e)return alert(_REQUIRED_USER_ID),!1;if(""==a)return alert(_REQUIRED_SERVICE_NAME),!1;if(!confirm(_CONFIRM_REG_CONNECT))return alert(_ERROR_CANCEL),!1;e=e+"_"+a;var d={};d.UserID=e;var f=[];f.push(d);var g={};g.Version=version;g.CMD=_REQ_MODIFY_CONNECT;g.Hash=genBodyHash(JSON.parse(JSON.stringify(f)));d=[];d.push(g);g={};g.Header=d;g.Body=JSON.stringify(f);$.ajax({url:_RELAY_SERVER_URL,type:"POST",data:{REQUEST:JSON.stringify(g)},success:function(a){a=JSON.parse(a);if(null!=a.Header[0].CMD){var d=JSON.parse(a.Body),f=d[0].Message,g=JSON.parse(d[0].Data);if(a.Header[0].Hash==genBodyHash(d)){if(a.Header[0].CMD==_RES_MODIFY_CONNECT)if(d[0].Status==_STATUS_PROCESS_OK)if(a=g.Random){$("#random").val(a);var n=+new Date;interval1=setInterval(function(){18E4>+new Date-n?reqRegComplete(e):clearInterval(interval1)},500)}else alert(_ERROR_NO_PARAM);else d[0].Status==_STATUS_PROCESS_FAIL&&alert(f)}else alert(_ERROR_HASH_VALIDATE_FAILED)}},error:function(){alert(_ERROR_FAILED)}})}function reqRegComplete(e){var a={};a.UserID=e;e=[];e.push(a);var d={};d.Version=version;d.CMD=_REQ_REG_COMPLETE;d.Hash=genBodyHash(JSON.parse(JSON.stringify(e)));a=[];a.push(d);d={};d.Header=a;d.Body=JSON.stringify(e);$.ajax({url:_RELAY_SERVER_URL,type:"POST",data:{REQUEST:JSON.stringify(d)},success:function(a){a=JSON.parse(a);if(null!=a.Header[0].CMD){var e=JSON.parse(a.Body),d=e[0].Message;JSON.parse(e[0].Data);a.Header[0].Hash==genBodyHash(e)?a.Header[0].CMD!=_RES_REG_COMPLETE||e[0].Status!=_STATUS_PROCESS_OK&&e[0].Status!=_STATUS_PROCESS_FAIL||(alert(d),clearInterval(interval1)):(alert(_ERROR_HASH_VALIDATE_FAILED),clearInterval(interval1))}},error:function(){alert(_ERROR_FAILED);clearInterval(interval1)}})}function genFIDORequest(e,a){if(""==getPhoneOSValue())return alert(_REQUIRED_PHONE_OS),!1;if(""==e)return alert(_REQUIRED_USER_ID),!1;if(""==a)return alert(_REQUIRED_SERVICE_NAME),!1;if(!confirm(_CONFIRM_FIDO_REQUEST))return alert(_ERROR_CANCEL),!1;$("#fidoResponse").val("");$("#authToken").val("");iFrame_authToken_validate.location.href="about:blank";e=e+"_"+a;var d={};d.UserID=e;var f=[];f.push(d);var g={};g.Version=version;g.CMD=_REQ_CONNECT_RELAY_PC;g.Hash=genBodyHash(JSON.parse(JSON.stringify(f)));d=[];d.push(g);g={};g.Header=d;g.Body=JSON.stringify(f);$.ajax({url:_RELAY_SERVER_URL,type:"POST",data:{REQUEST:JSON.stringify(g)},success:function(a){a=JSON.parse(a);if(null!=a.Header[0].CMD){var d=JSON.parse(a.Body),g=d[0].Message,f=JSON.parse(d[0].Data);if(a.Header[0].Hash==genBodyHash(d)){if(a.Header[0].CMD==_RES_CONNECT_RELAY_PC)if(d[0].Status==_STATUS_PROCESS_OK){var n=f.TID;if(n){var p=+new Date;interval2=setInterval(function(){18E4>+new Date-p?reqSecretShare(n,e):clearInterval(interval2)},500)}else alert(_ERROR_NO_PARAM)}else d[0].Status==_STATUS_PROCESS_FAIL&&alert(g)}else alert(_ERROR_HASH_VALIDATE_FAILED)}},error:function(){alert(_ERROR_FAILED)}})}function reqSecretShare(e,a){var d={};d.TID=e;var f=[];f.push(d);var g={};g.Version=version;g.CMD=_REQ_SECRET_SHARE;g.Hash=genBodyHash(JSON.parse(JSON.stringify(f)));d=[];d.push(g);g={};g.Header=d;g.Body=JSON.stringify(f);$.ajax({url:_RELAY_SERVER_URL,type:"POST",data:{REQUEST:JSON.stringify(g)},success:function(d){var g=JSON.parse(d);if(null!=g.Header[0].CMD){var f=JSON.parse(g.Body),m=f[0].Message;d=JSON.parse(f[0].Data);g.Header[0].Hash==genBodyHash(f)?g.Header[0].CMD==_RES_SECRET_SHARE&&(f[0].Status==_STATUS_PROCESS_OK?(clearInterval(interval2),g=d.PublicKey,d=d.R1,g&&d?reqPCFinished(g,d,e,a):alert(_ERROR_NO_PARAM)):f[0].Status==_STATUS_PROCESS_FAIL&&alert(m)):(alert(_ERROR_HASH_VALIDATE_FAILED),clearInterval(interval2))}},error:function(){alert(_ERROR_FAILED);clearInterval(interval2)}})}function reqPCFinished(e,a,d,f){var g=crosscert.random.getBytes(20);e=genAsymmeticEncryptData(e,g);f=genCCFIDOCommand(f);var h=crosscert.util.createBuffer();h.putBytes(f);var k=genSymmetricEncryptData(a,g,h);f={};f.R2=e;f.CipherText=k;f.TID=d;e=[];e.push(f);h={};h.Version=version;h.CMD=_REQ_PC_FINISHED;h.Hash=genBodyHash(JSON.parse(JSON.stringify(e)));f=[];f.push(h);h={};h.Header=f;h.Body=JSON.stringify(e);$.ajax({url:_RELAY_SERVER_URL,type:"POST",data:{REQUEST:JSON.stringify(h)},success:function(e){e=JSON.parse(e);if(null!=e.Header[0].CMD){var f=JSON.parse(e.Body),h=f[0].Message;JSON.parse(f[0].Data);if(e.Header[0].Hash==genBodyHash(f)){if(e.Header[0].CMD==_RES_PC_FINISHED)if(f[0].Status==_STATUS_PROCESS_OK)if(a&&g&&k&&d){var p=+new Date;interval3=setInterval(function(){18E4>+new Date-p?reqApplicationPCData(a,g,k,d):clearInterval(interval3)},500)}else alert(_ERROR_NO_PARAM);else f[0].Status==_STATUS_PROCESS_FAIL&&alert(h)}else alert(_ERROR_HASH_VALIDATE_FAILED)}},error:function(){alert(_ERROR_FAILED)}})}function reqApplicationPCData(e,a,d,f){d={};d.TID=f;f=[];f.push(d);var g={};g.Version=version;g.CMD=_REQ_APPLICATION_PCDATA;g.Hash=genBodyHash(JSON.parse(JSON.stringify(f)));d=[];d.push(g);g={};g.Header=d;g.Body=JSON.stringify(f);$.ajax({url:_RELAY_SERVER_URL,type:"POST",data:{REQUEST:JSON.stringify(g)},success:function(d){var f=JSON.parse(d);if(null!=f.Header[0].CMD){var g=JSON.parse(f.Body),m=g[0].Message;d=JSON.parse(g[0].Data);f.Header[0].Hash==genBodyHash(g)?f.Header[0].CMD==_RES_APPLICATION_PCDATA&&(g[0].Status==_STATUS_PROCESS_OK?(clearInterval(interval3),f=d.AuthToken,d=d.CipherSText,e&&a&&d&&f?(d=genSymmetricDecryptData(e,a,d),verifyDecryptText(d)?(d=printDecryptText(d),d=JSON.parse(d),d=crosscert.util.decode64(d.ErrCode),$("#fidoResponse").val(d),d=JSON.stringify(d),d=d.replace(/\u0000/g,""),d=d.replace(/\\u0000/g,""),d=JSON.parse(d),d=JSON.parse(d),"0"==d.errCode&&$("#authToken").val(d.authToken)):alert(_ERROR_HASH_VALIDATE_FAILED)):alert(_ERROR_NO_PARAM)):g[0].Status==_STATUS_PROCESS_FAIL&&alert(m)):(alert(_ERROR_HASH_VALIDATE_FAILED),clearInterval(interval3))}},error:function(){alert(_ERROR_FAILED);clearInterval(interval3)}})}function reqVerifyAuthToken(e,a){var d={};d.AuthToken=e;d.TID=a;var f=[];f.push(d);var g={};g.Version=version;g.CMD=_REQ_VERIFY_AUTHTOKEN;g.Hash=genBodyHash(JSON.parse(JSON.stringify(f)));d=[];d.push(g);g={};g.Header=d;g.Body=JSON.stringify(f);$.ajax({url:_RELAY_SERVER_URL,type:"POST",data:{REQUEST:JSON.stringify(g)},success:function(a){a=JSON.parse(a);if(null!=a.Header[0].CMD){var d=JSON.parse(a.Body),e=d[0].Message;JSON.parse(d[0].Data);a.Header[0].Hash==genBodyHash(d)?a.Header[0].CMD==_RES_VERIFY_AUTHTOKEN&&(d[0].Status!=_STATUS_PROCESS_OK&&d[0].Status!=_STATUS_INVALID_AUTHTOKEN||alert(e)):alert(_ERROR_HASH_VALIDATE_FAILED)}},error:function(){alert(_ERROR_FAILED)}})}function genCCFIDOCommand(e){var a={};a.op=getOperationType();a.serviceName=_FIDO_SERVICE_NAME;a.serviceType=_FIDO_SERVICE_TYPE;a.bioType=decimalToHexString(parseInt(getBioTypeValue()));a.id=e;e={};e.product_type=_PRODUCT_TYPE;e.product_type="FIDO";e.ccfidoprotocol=a;e.caller_url_scheme=_RET_SELF_URL;-1<getPhoneOSValue().indexOf("iOS")&&(e.appKey=_APPKEY_IOS);-1<getPhoneOSValue().indexOf("ANDROID")&&(e.appKey=_APPKEY_ANDROID);a="";return a=encodeUrl(crosscert.util.encode64(JSON.stringify(e)))}function getPhoneOSValue(){for(var e="",a=document.getElementsByName("phoneOS"),d=0;d<a.length;d++)a[d].checked&&(e=a[d].value);return e}function getOperationType(){for(var e="",a=document.getElementsByName("operationType"),d=0;d<a.length;d++)a[d].checked&&(e=a[d].value);return e}function getBioTypeValue(){for(var e="",a=document.getElementsByName("bioType"),d=0;d<a.length;d++)a[d].checked&&(e=a[d].value);return e}function genAsymmeticEncryptData(e,a){var d="";try{var f=decodeUrl(e),g=crosscert.pki.publicKeyFromBase64(f).encrypt(a),d=crosscert.util.encode64(g),h=encodeUrl(d)}catch(k){alert(k.message+"[errcode : "+k.code+"]")}return h}function genSymmetricEncryptData(e,a,d){var f="";e=decodeUrl(e);f=crosscert.util.decode64(e);e="";try{var g=crosscert.md.algorithms.sha256.create();g.start();g.update(f);var h=g.digest().toHex(),k=crosscert.util.hexToBytes(h).concat(a),l=crosscert.md.algorithms.sha256.create();l.start();l.update(k);var m=l.digest().toHex();e=toHexArray(m)}catch(n){alert(n.message+"[errcode : "+n.code+"]")}a=Array(16);for(g=0;16>g;g++)a[g]=e[g];a=toHexString(a);g=Array(16);for(h=0;16>h;h++)g[h]=e[h+16];e=toHexString(g);a=crosscert.util.hexToBytes(a);e=crosscert.util.hexToBytes(e);e=crosscert.cipher.algorithms.aes.startEncrypting(a,e);e.update(crosscert.util.createBuffer(d));e.finish();f=crosscert.util.encode64(e.output.getBytes());return encodeUrl(f)}function genSymmetricDecryptData(e,a,d){var f="";e=decodeUrl(e);f=crosscert.util.decode64(e);d=decodeUrl(d);d=crosscert.util.decode64(d);e="";try{var g=crosscert.md.algorithms.sha256.create();g.start();g.update(f);var h=g.digest().toHex(),k=crosscert.util.hexToBytes(h).concat(a),l=crosscert.md.algorithms.sha256.create();l.start();l.update(k);var m=l.digest().toHex();e=toHexArray(m)}catch(n){alert(n.message+"[errcode : "+n.code+"]")}a=Array(16);for(g=0;16>g;g++)a[g]=e[g];a=toHexString(a);g=Array(16);for(h=0;16>h;h++)g[h]=e[h+16];e=toHexString(g);a=crosscert.util.hexToBytes(a);e=crosscert.util.hexToBytes(e);a=crosscert.cipher.algorithms.aes.startDecrypting(a,e);a.update(crosscert.util.createBuffer(d));a.finish();return f=a.output.getBytes()}function genBodyHash(e){e=JSON.stringify(e);var a=crosscert.md.algorithms.sha256.create();a.start();a.update(e);e=crosscert.util.encode64(crosscert.util.hexToBytes(a.digest().toHex()));return e=encodeUrl(e)}function verifyDecryptText(e){var a=!1,d=e.substr(0,32);e=e.substr(32,e.length-32);var f=crosscert.md.algorithms.sha256.create();f.start();f.update(e);e=crosscert.util.hexToBytes(f.digest().toHex());d===e&&(a=!0);return a}function printDecryptText(e){return e.substr(32,e.length-32)}function toHexArray(e){for(var a=[],d=0;d<e.length;d+=2)a.push("0x"+e.substr(d,2));return a}function toHexString(e){var a="";for(i in e)var d=e[i].toString(16),d=0==d.length?"00":1==d.length?"0"+d:2==d.length?d:d.substring(d.length-2,d.length),a=a+d;return a}function encodeUrl(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}function decodeUrl(e){e=(e+"=").slice(0,e.length+e.length%4);return e.replace(/-/g,"+").replace(/_/g,"/")}function cutByLen(e,a){for(b=i=0;c=e.charCodeAt(i);){b+=c>>7?2:1;if(b>a)break;i++}return e.substring(0,i)}function decimalToHexString(e){0>e&&(e=4294967295+e+1);return e.toString(16).toUpperCase()}function environmentInit(){var e=null,a=null,d=0,f=null,g=navigator.platform,h=navigator.userAgent,e=0<=g.indexOf("Win")?"win":0<=g.indexOf("Mac")?"mac":0<=g.indexOf("Linux")?"linux":0<=g.indexOf("iPhone")||0<=g.indexOf("iPad")||0<=g.indexOf("iPod")?"ios":"unknown";0<=h.indexOf("Android")&&(e="android");"android"===e?0<=h.indexOf("SAMSUNG")?(a="android samsung",f=/Version\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("OPR")?(a="android opera",f=/OPR\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("Opera")?(a="android opera classic",f=/Version\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("Firefox")?(a="android firefox",f=/Firefox\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("NAVER")?a="android naver":0<=h.indexOf("DaumApps")?(a="android daum",f=/DaumApps\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("nate_app")?a="android nate":0<=h.indexOf("UCBrowser")?(a="android uc",f=/UCBrowser\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("Chrome")?0<=h.indexOf("Version")?(a=0<=h.indexOf("LG")?"android lg":"android browser",f=/Version\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("LG")?((f=/Chrome\/([0-9]{1,}[.0-9]{0,})/)&&f.exec(h)&&(d=parseFloat(RegExp.$1)),a=39>d?"android lg":"android chrome"):(a="android chrome",f=/Chrome\/([0-9]{1,}[.0-9]{0,})/):(a="unknown",d=0):"ios"===e?0<=h.indexOf("CriOS")?(a="ios chrome",f=/CriOS\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("NAVER")?a="ios naver":0<=h.indexOf("DaumApps")?(a="ios daum",f=/DaumApps\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("Coast")?(a="ios opera coast",f=/Coast\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("Safari")?(a="ios safari",f=/Version\/([0-9]{1,}[.0-9]{0,})/):(a="unknown",d=0):0<=h.indexOf("MSIE")?(a="msie","BackCompat"==document.compatMode?d=5:document.documentMode?d=document.documentMode:f=/MSIE ([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("Chrome")?(a="chrome",f=/Chrome\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("Firefox")?(a="firefox",f=/Firefox\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("Safari")?(a="safari",f=/Version\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("Opera")?(a="opera",f=/Version\/([0-9]{1,}[.0-9]{0,})/):0<=h.indexOf("rv:11.")?(a="msie",f=/rv:([0-9]{1,}[.0-9]{0,})/):(a="unknown",d=0);f&&f.exec(h)&&(d=parseFloat(RegExp.$1));console.info("UI platform : ",g,"\nuseragent : ",h,"\nOS name : ",e,"\nbrowser name : ",a,"\nbrowser version : ",d)}function intergrityChk(){var e=callExternalScript({eval:!1,intergrity:!1,name:"push",url:"integrity/push.js"}),a=null;try{a=crosscert.pkcs7.messageFromBase64(e),a.verify()}catch(d){console.info("ErrCode : ",d.code);return}console.info("verify result :",a.verifyResult);if(!0==a.verifyResult){for(var e=[],e=genpkcs7List(a.content),a=[{eval:!0,intergrity:!0,name:"util",url:"jsustoolkit/toolkit/util.js"},{eval:!0,intergrity:!0,name:"jsbn",url:"jsustoolkit/toolkit/jsbn.js"},{eval:!0,intergrity:!0,name:"aes",url:"jsustoolkit/crypto/aes.js"},{eval:!0,intergrity:!0,name:"des",url:"jsustoolkit/crypto/des.js"},{eval:!0,intergrity:!0,name:"desofb",url:"jsustoolkit/crypto/desofb.js"},{eval:!0,intergrity:!0,name:"seed",url:"jsustoolkit/crypto/seed.js"},{eval:!0,intergrity:!0,name:"sha1",url:"jsustoolkit/crypto/sha1.js"},{eval:!0,intergrity:!0,name:"md5",url:"jsustoolkit/crypto/md5.js"},{eval:!0,intergrity:!0,name:"sha256",url:"jsustoolkit/crypto/sha256.js"},{eval:!0,intergrity:!0,name:"prng",url:"jsustoolkit/crypto/prng.js"},{eval:!0,intergrity:!0,name:"hmac",url:"jsustoolkit/crypto/hmac.js"},{eval:!0,intergrity:!0,name:"random",url:"jsustoolkit/crypto/random.js"},{eval:!0,intergrity:!0,name:"oids",url:"jsustoolkit/toolkit/oids.js"},{eval:!0,intergrity:!0,name:"asn1",url:"jsustoolkit/toolkit/asn1.js"},{eval:!0,intergrity:!0,name:"rsa",url:"jsustoolkit/crypto/rsa.js"},{eval:!0,intergrity:!0,name:"pki",url:"jsustoolkit/toolkit/pki.js"},{eval:!0,intergrity:!0,name:"pkcs5",url:"jsustoolkit/toolkit/pkcs5.js"},{eval:!0,intergrity:!0,name:"pkcs8",url:"jsustoolkit/toolkit/pkcs8.js"},{eval:!0,intergrity:!0,name:"pkcs7asn1",url:"jsustoolkit/toolkit/pkcs7asn1.js"},{eval:!0,intergrity:!0,name:"pkcs7",url:"jsustoolkit/toolkit/pkcs7.js"},{eval:!0,intergrity:!0,name:"const",url:"push/const.js"},{eval:!0,intergrity:!0,name:"utils",url:"push/utils.js"}],f=0;f<a.length;f++)callExternalScript(a[f]);for(a=0;a<__FileList.length;a++){var f=__FileList[a].name,g=__FileList[a].data,h=crosscert.md.algorithms.sha256.create();h.start();h.update(g);for(g=0;g<e.length;g++)if(e[g].name==f&&e[g].data!=h.digest().toHex()){console.info("*** Suspicion Forgery ***");console.info("intergrity file name : ",e[g].name);console.info("intergrity file md data : ",e[g].data);console.info("downloaded file name : ",f);console.info("downloaded file md data : ",h.digest().toHex());console.info("Is this Browser supporting plugin free cert backup? : ",e[g].data==h.digest().toHex());alert(_ERROR_FORGERY_VERIFY);return}}}else alert(_ERROR_SIGN_VERIFY)}function callExternalScript(e){var a=null,a=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");a.open("GET",e.url,!1);a.send(null);if(200==a.status){if(!0===e.intergrity){var d={};d.name=e.name+".js";d.data=a.responseText;__FileList[__ListIndex++]=d}if(!1==e.eval&&!1==e.intergrity)return a.responseText}}function genpkcs7List(e){var a=[];e=e.data.split(/\r\n|\r|\n/g);for(var d=0;d<e.length;d++){var f=e[d].split("|"),g={};g.name=f[0];g.data=f[1];a[d]=g}return a}var _USMessage={NoticeDownload:"\uc571\uc774 \uc124\uce58\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc744 \uacbd\uc6b0\n\uc124\uce58\ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.",ConfirmDownload:"\uc571 \uc124\uce58 \ud6c4 \uc774\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\uc124\uce58 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",NoticeUnsupportedOS:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uc6b4\uc601\uccb4\uc81c\uc785\ub2c8\ub2e4."},UniSignW2A={Scheme:{iOS:"unisign-app",Android:"crosscert"},Package:{Android:"com.crosscert.android"},DownloadURL:{iOS:"https://itunes.apple.com/kr/app/gong-in-injeungsenteo/id426081742?mt=8",Android:"market://details?id=com.crosscert.android"},AutoCheckInstallation:!0,UseTopLocation:!1,checkCrossCert:function(e){if(_USUtil.OS.isAndroid())alert(_USMessage.NoticeDownload),top.location.href=_USUtil.makeIntent(this.Scheme.Android,"init","isInit","true");else if(_USUtil.OS.isiOS()){if(!1!=this.AutoCheckInstallation||null==e||0==e.length){if(null==e||0==e.length)e=this.Scheme.iOS+"://?cmd=Main&caller_url_scheme="+location.href+"&callback=01";var a=+new Date;setTimeout(function(){1600>+new Date-a&&UniSignW2A.moveToStore()},1500)}top.location.href=e}else alert(_USMessage.NoticeUnsupportedOS)},getLicenseInfo:function(e){_USUtil.OS.isAndroid()?(e=_USUtil.makeIntent(this.Scheme.Android,"licenseinfo","requestCode","2","retURL",e),top.location.href=e):_USUtil.OS.isiOS()?(e=_USUtil.makeCustomScheme(this.Scheme.iOS,"LicenseInfo","caller_url_scheme",e,"callback","01"),this.checkCrossCert(e)):alert(_USMessage.NoticeUnsupportedOS)}},_USUtil={OS:{UserAgent:{Android_Phone:"Android",Android_Pad:"Android",iPhone:"iPhone",iPad:"iPad"},isAndroid:function(){return-1<navigator.userAgent.indexOf(this.UserAgent.Android_Phone)?!0:!1},isiOS:function(){return-1<navigator.userAgent.indexOf(this.UserAgent.iPhone)||-1<navigator.userAgent.indexOf(this.UserAgent.iPad)?!0:!1},isSupported:function(){return this.isAndroid()||this.isiOS()?!0:!1}},makeIntent:function(){if(!1!==this.OS.isAndroid()&&!(4>arguments.length)){for(var e="intent://"+arguments[1],a="",d=1;2*d<arguments.length;d++)a=0>=a.length?a+("?"+arguments[2*d]+"="+arguments[2*d+1]):a+("&"+arguments[2*d]+"="+arguments[2*d+1]);d="";if(UniSignW2A.Scheme.Android===arguments[0])d="#Intent;package="+UniSignW2A.Package.Android+";",d+="action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;",d+="component=com.crosscert.android/com.crosscert.android.esign.ESign1CertList;",d=d+"scheme="+UniSignW2A.Scheme.Android+";",d+="end;";else if(VeriSign.Scheme.Android===arguments[0])d="#Intent;scheme="+VeriSign.Scheme.Android+";action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;package="+VeriSign.Package.Android+";end";else return;return e+a+d}},makeFIDOIntent:function(){if(!1!==this.OS.isAndroid()&&!(4>arguments.length)){for(var e="",a=1;2*a<arguments.length;a++)e=0>=e.length?e+("?product_type="+arguments[1]+"&"+arguments[2*a]+"="+arguments[2*a+1]):e+("&"+arguments[2*a]+"="+arguments[2*a+1]);a="";if(UniSignW2A.Scheme.Android===arguments[0])a="#Intent;package="+UniSignW2A.Package.Android+";",a+="action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;",a+="component=com.crosscert.android/com.crosscert.android.esign.ESign1CertList;",a=a+"scheme="+UniSignW2A.Scheme.Android+";",a+="end;";else if(VeriSign.Scheme.Android===arguments[0])a="#Intent;scheme="+VeriSign.Scheme.Android+";action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;package="+VeriSign.Package.Android+";end";else return;return"intent://FIDO"+e+a}},makePINPADIntent:function(){if(!1!==this.OS.isAndroid()&&!(4>arguments.length)){for(var e="",a=1;2*a<arguments.length;a++)e=0>=e.length?e+("?product_type="+arguments[1]+"&"+arguments[2*a]+"="+arguments[2*a+1]):e+("&"+arguments[2*a]+"="+arguments[2*a+1]);a="";if(UniSignW2A.Scheme.Android===arguments[0])a="#Intent;package="+UniSignW2A.Package.Android+";",a+="action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;",a+="component=com.crosscert.android/com.crosscert.android.esign.ESign1CertList;",a=a+"scheme="+UniSignW2A.Scheme.Android+";",a+="end;";else if(VeriSign.Scheme.Android===arguments[0])a="#Intent;scheme="+VeriSign.Scheme.Android+";action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;package="+VeriSign.Package.Android+";end";else return;return"intent://FIDO"+e+a}},makeCustomScheme:function(){if(!1!==_USUtil.OS.isiOS()&&!(4>arguments.length)){for(var e=arguments[0]+"://?cmd="+arguments[1],a="",d=1;2*d<arguments.length;d++)a+="&"+arguments[2*d]+"="+arguments[2*d+1];return e+a+""}},makeFIDOScheme:function(){for(var e=arguments[0]+"://?product_type="+arguments[1],a="",d=1;2*d<arguments.length;d++)a+="&"+arguments[2*d]+"="+arguments[2*d+1];return e+a+""},makePINPADScheme:function(){if(!1!==_USUtil.OS.isiOS()&&!(4>arguments.length)){for(var e=arguments[0]+"://?product_type="+arguments[1],a="",d=1;2*d<arguments.length;d++)a+="&"+arguments[2*d]+"="+arguments[2*d+1];return e+a+""}},getQueryVariable:function(e){for(var a=window.location.search.substring(1).split("&"),d=0;d<a.length;d++)if(0<a[d].indexOf("=")&&e==a[d].substring(0,a[d].indexOf("=")))return a[d].substring(a[d].indexOf("=")+1,a[d].length);return null},encodeUrl:function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")},Base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var a="",d,f,g,h,k,l,m=0;for(e=this._utf8_encode(e);m<e.length;)d=e.charCodeAt(m++),f=e.charCodeAt(m++),g=e.charCodeAt(m++),h=d>>2,d=(d&3)<<4|f>>4,k=(f&15)<<2|g>>6,l=g&63,isNaN(f)?k=l=64:isNaN(g)&&(l=64),a=a+this._keyStr.charAt(h)+this._keyStr.charAt(d)+this._keyStr.charAt(k)+this._keyStr.charAt(l);return a},decode:function(e){var a="",d,f,g,h,k,l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)d=this._keyStr.indexOf(e.charAt(l++)),f=this._keyStr.indexOf(e.charAt(l++)),h=this._keyStr.indexOf(e.charAt(l++)),k=this._keyStr.indexOf(e.charAt(l++)),d=d<<2|f>>4,f=(f&15)<<4|h>>2,g=(h&3)<<6|k,a+=String.fromCharCode(d),64!=h&&(a+=String.fromCharCode(f)),64!=k&&(a+=String.fromCharCode(g));return a=this._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var a="",d=0;d<e.length;d++){var f=e.charCodeAt(d);128>f?a+=String.fromCharCode(f):(127<f&&2048>f?a+=String.fromCharCode(f>>6|192):(a+=String.fromCharCode(f>>12|224),a+=String.fromCharCode(f>>6&63|128)),a+=String.fromCharCode(f&63|128))}return a},_utf8_decode:function(e){for(var a="",d=0,f=c1=c2=0;d<e.length;)f=e.charCodeAt(d),128>f?(a+=String.fromCharCode(f),d++):191<f&&224>f?(c2=e.charCodeAt(d+1),a+=String.fromCharCode((f&31)<<6|c2&63),d+=2):(c2=e.charCodeAt(d+1),c3=e.charCodeAt(d+2),a+=String.fromCharCode((f&15)<<12|(c2&63)<<6|c3&63),d+=3);return a}}};